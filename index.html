<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <link rel="stylesheet" href="">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>
<body>
    <input type="button" value="Click" onclick="runJSONP()">
    <p></p>
    <input type="button" value="onClick" onclick="runJSON()">
</body>
<script>
    $(function() {
        runAjax();
    });

    function runAjax() {
        $.ajax({
            url: 'http://localhost:8002/index.php',
            type: 'GET',
            dataType: 'jsonp',
            jsonp: 'callback',
            jsonpCallback: 'handler',
            success: function(jsonp) {
                console.log(jsonp);
            }
        });
    }

    // 此為錯誤示範，因為網址生成時，外面看不到handle
    // 除非建立全域 var handle ;
    var handle;
    function runJSONP() {
        handle = function(jsonp) {
            console.log(jsonp);
        };

        var url = "http://localhost:8002/index.php?callback=handle";

        var script = document.createElement('script');

        script.setAttribute('src', url);

        document.getElementsByTagName('head')[0].appendChild(script);
    }

    function runJSON() {
        $.ajax({
            url: 'http://localhost:8002/index.php',
            type: 'GET',
            dataType: 'json',
            success: function(json) {
                console.log(json);
            }
        });
    }

</script>
</html>